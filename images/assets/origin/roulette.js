define(["model/content","view/content","view/gacha/cjs/cjs-roulette","util/navigate"],function(a,b,c,d){var e=b.extend({rouletteNext:null,events:{"playEnd #cjs-login":"playEndRoulette","playEnd #cjs-roulette":"playEndRouletteSpecialmode"},initialize:function(b){this.content_bind(),this.attr=b;var c=new a({controller:"gacha/roulette",action:"index"});this.listenToOnce(c,"sync",this.render),c.fetch()},render:function(a){this.content_render(a);var b="end"===this.attr.status?"cjs-roulette":"cjs-login";this.$el.find(".cjs-roulette").attr("id",b);var d=new c({cjsId:b,cjsName:this.attr.cjsName,status:this.attr.status,isSpecialmode:!!this.attr.mode});if(this.addSubView(d),"start"===this.attr.status){var e=this;d.once("rouletteNext",function(a){e.rouletteNext=a})}this.trigger("loadEnd")},playEndRoulette:function(){this.content_close(),d.hash(this.rouletteNext,{refresh:!0})},playEndRouletteSpecialmode:function(){this.content_close();var a=this.attr.next.replace(/!/g,"/")||"gacha";d.hash(a,{refresh:!0})}});return e});